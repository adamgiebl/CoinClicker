const container=document.querySelector("#game_elements"),heartsContainer=document.querySelector("#hearts"),coinsContainer=document.querySelector("#coins"),screen=document.querySelector("#screen");let allHearts=[];const types={HEART:"heart",COIN:"coin",BOMB:"bomb"};window.addEventListener("load",start);let hearts=3,coins=0;function start(){console.log("start"),createHearts(3),generateElements(types.BOMB,4),generateElements(types.COIN,7),generateElements(types.HEART,1),coinsContainer.innerText=coins}function createHearts(numberOfHearts){for(let i=0;i<numberOfHearts;i++)heartsContainer.innerHTML+='<div class="heart"></div>';allHearts=document.querySelectorAll(".heart")}function updateHearts(){allHearts.forEach(heart=>{heart.classList.add("broken")});for(let i=0;i<hearts;i++)allHearts[i].classList.remove("broken")}function generateCoins(numberOfcoins){for(let i=0;i<numberOfcoins;i++){const coin=document.createElement("div");coin.classList.add("coin_container","falling"),coin.innerHTML='<div class="sprite"></div>',coin.randomize=function(){this.style.left=Math.floor(100*Math.random())+"vw",this.classList.remove("speed1","speed2","speed3"),this.classList.add("speed"+(Math.floor(3*Math.random())+1))},coin.restart=function(){this.classList.remove("falling"),this.offsetHeight,this.classList.add("falling"),this.randomize()},coin.clicked=function(){coins++,coinsContainer.innerText=coins,this.classList.add("pause"),this.children[0].classList.add("zoom"),this.children[0].addEventListener("animationend",()=>{this.classList.remove("pause"),this.children[0].classList.remove("zoom")})},coin.randomize(),coin.addEventListener("mousedown",coin.clicked),coin.addEventListener("animationend",coin.restart),container.appendChild(coin)}}function generateBombs(numberOfbombs){for(let i=0;i<numberOfbombs;i++){const bomb=document.createElement("div");bomb.classList.add("bomb_container","falling"),bomb.innerHTML='<div class="sprite"></div>',bomb.dataset.id=i,console.log("here"),bomb.randomize=function(){this.addEventListener("click",this.clicked),this.style.left=Math.floor(100*Math.random())+"vw",this.classList.remove("speed1","speed2","speed3"),this.classList.add("speed"+(Math.floor(3*Math.random())+1))},bomb.restart=function(){console.log("res"),this.children[0].classList.remove("explode"),this.classList.remove("pause"),this.classList.remove("falling"),this.offsetHeight,this.classList.add("falling"),this.addEventListener("click",this.clicked),this.randomize()},bomb.clicked=function(){1===hearts?window.location.reload():hearts--,updateHearts(),this.removeEventListener("click",this.clicked),this.classList.add("pause"),this.children[0].classList.add("explode"),screen.classList.add("shake"),requestAnimationFrame(()=>{screen.addEventListener("animationend",()=>{screen.classList.remove("shake")})})},bomb.randomize(),bomb.addEventListener("mousedown",bomb.clicked),bomb.addEventListener("animationend",bomb.restart),container.appendChild(bomb)}}function generateElements(type,numberOfElements){for(let i=0;i<numberOfElements;i++){const el=document.createElement("div"),clickClass=type===types.BOMB?"explode":"zoom";el.classList.add(`${type}_container`,"falling"),el.innerHTML='<div class="sprite"></div>',el.dataset.id=i,el.dataset.type=type,el.randomize=function(){this.addEventListener("click",this.clicked),this.style.left=Math.floor(100*Math.random())+"vw",this.classList.remove("speed1","speed2","speed3"),this.classList.add("speed"+(Math.floor(3*Math.random())+1))},el.restart=function(){this.children[0].classList.remove(clickClass),this.classList.remove("pause"),this.classList.remove("falling"),this.offsetHeight,this.classList.add("falling"),this.addEventListener("click",this.clicked),this.randomize()},el.clicked=function(){switch(type){case types.BOMB:1===hearts?window.location.reload():hearts--,updateHearts();break;case types.COIN:coins++,coinsContainer.innerText=coins;break;case types.HEART:3!==hearts&&hearts++,updateHearts()}this.removeEventListener("click",this.clicked),this.classList.add("pause"),this.children[0].classList.add(clickClass),"explode"===clickClass?screen.classList.add("shake"):this.children[0].classList.add("zoom"),requestAnimationFrame(()=>{screen.addEventListener("animationend",()=>{"explode"===clickClass?screen.classList.remove("shake"):(this.children[0].classList.remove("zoom"),this.classList.remove("pause"))})})},el.randomize(),el.addEventListener("mousedown",el.clicked),el.addEventListener("animationend",el.restart),container.appendChild(el)}}